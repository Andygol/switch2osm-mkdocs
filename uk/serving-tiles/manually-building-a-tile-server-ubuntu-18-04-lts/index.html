<!DOCTYPE html><html lang="uk" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://andygol.co.ua/switch2osm-mkdocs/uk/serving-tiles/manually-building-a-tile-server-ubuntu-18-04-lts/">
      
      
        <link rel="prev" href="../manually-building-a-tile-server-ubuntu-20-04-lts/">
      
      
        <link rel="next" href="../using-a-docker-container/">
      
      
      <link rel="icon" href="../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.7">
    
    
      
        <title>Створення тайлового сервера вручну (Ubuntu 18.04 LTS) - Switch2OSM</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#Створення-тайлового-сервера-вручну-Ubuntu-1804-LTS" class="md-skip">
          Перейти до змісту
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Хедер">
    <a href="../../" title="Switch2OSM" class="md-header__button md-logo" aria-label="Switch2OSM" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.672 23.969c-.352-.089-.534-.234-1.471-1.168C.085 21.688.014 21.579.018 20.999c0-.645-.196-.414 3.368-3.986 3.6-3.608 3.415-3.451 4.064-3.449.302 0 .378.016.62.14l.277.14 1.744-1.744-.218-.343c-.425-.662-.825-1.629-1.006-2.429a7.66 7.66 0 0 1 1.479-6.44c2.49-3.12 6.959-3.812 10.26-1.588 1.812 1.218 2.99 3.099 3.328 5.314.07.467.07 1.579 0 2.074a7.55 7.55 0 0 1-2.205 4.402 6.7 6.7 0 0 1-1.943 1.401c-.959.483-1.775.71-2.881.803-1.573.131-3.32-.305-4.656-1.163l-.343-.218-1.744 1.744.14.28c.125.241.14.316.14.617.003.651.156.467-3.426 4.049-2.761 2.756-3.186 3.164-3.398 3.261-.271.125-.69.171-.945.106zM17.485 13.95a6.43 6.43 0 0 0 4.603-3.51c1.391-2.899.455-6.306-2.227-8.108-.638-.43-1.529-.794-2.367-.962-.581-.117-1.809-.104-2.414.025a6.6 6.6 0 0 0-2.452 1.064c-.444.315-1.177 1.048-1.487 1.487a6.384 6.384 0 0 0 .38 7.907 6.4 6.4 0 0 0 3.901 2.136c.509.078 1.542.058 2.065-.037zm-3.738 7.376a81 81 0 0 1-2.196-.651c-.025-.028 1.207-4.396 1.257-4.449.023-.026 4.242 1.152 4.414 1.236.062.026-.003.288-.525 2.102a399 399 0 0 0-.635 2.236c-.025.087-.069.156-.097.156-.028-.003-1.028-.287-2.219-.631zm2.912.524c0-.053 1.227-4.333 1.246-4.347.047-.034 4.324-1.23 4.341-1.211.019.019-1.199 4.337-1.23 4.36-.02.019-4.126 1.191-4.259 1.218-.054.011-.098 0-.098-.019zm-7.105-1.911c.846-.852 1.599-1.627 1.674-1.728.171-.218.405-.732.472-1.015.026-.118.053-.352.058-.522l.011-.307.182-.051c.103-.028.193-.044.202-.034.023.025-1.207 4.321-1.246 4.36-.02.016-.677.213-1.464.436l-1.425.405 1.537-1.542zm8.289-3.06a1.4 1.4 0 0 1-.059-.187l-.044-.156.156-.028c1.339-.227 2.776-.856 3.908-1.713.16-.125.252-.171.265-.134.054.165.272.95.265.959-.034.034-4.48 1.282-4.492 1.261zm-15.083-1.3c-.05-.039-1.179-3.866-1.264-4.29-.016-.084.146-.044 2.174.536 2.121.604 2.192.629 2.222.74.028.098.011.129-.125.223-.084.059-.769.724-1.523 1.479a64 64 0 0 1-1.39 1.367c-.016 0-.056-.025-.093-.054zm.821-4.378c-1.188-.343-2.164-.623-2.167-.626-.016-.012 1.261-4.433 1.285-4.46.022-.022 4.422 1.211 4.469 1.252.009.009-.269 1.017-.618 2.239-.576 2.02-.643 2.224-.723 2.22-.05-.003-1.059-.285-2.247-.626zm2.959.538c.012-.031.212-.723.444-1.534l.42-1.476.056.321c.093.556.265 1.188.464 1.741.106.296.187.539.181.545-.008.006-.332.101-.719.212-.389.109-.741.21-.786.224q-.085.025-.059-.034zM4.905 6.112c-1.187-.339-2.167-.635-2.18-.654-.04-.062-1.246-4.321-1.23-4.338.026-.025 4.31 1.204 4.351 1.246.047.051 1.28 4.379 1.246 4.376L4.91 6.113zm2.148-1.713-.519-1.806-.078-.28 1.693-.483c.934-.265 1.724-.495 1.76-.508.034-.016-.083.14-.26.336A8.7 8.7 0 0 0 7.69 5.23a4 4 0 0 0-.132.561c0 .293-.115-.025-.505-1.39z"></path></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Switch2OSM
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Створення тайлового сервера вручну (Ubuntu 18.04 LTS)
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo" aria-label="Увімкнути світлий режим" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Увімкнути світлий режим" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07zm-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13zm-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87zM19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35zm4.33-2.7 1.15-2.77 2.2 2.54zm1.15-4.96-1.14-2.78 3.34.24zM9.63 18.93l2.77 1.15-2.53 2.19z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="lime" data-md-color-accent="deep-orange" aria-label="Увімкнути темний режим" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Увімкнути темний режим" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="amber" aria-label="Увімкнути режим системи" type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Увімкнути режим системи" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Обрати мову">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"></path></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../serving-tiles/manually-building-a-tile-server-ubuntu-18-04-lts/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="uk" class="md-select__link">
              Українська
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../zh-TW/serving-tiles/manually-building-a-tile-server-ubuntu-18-04-lts/" hreflang="zh-TW" class="md-select__link">
              台灣華語
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="https://app.transifex.com/osm-ua/swtch2osm/dashboard/#/" hreflang="null" class="md-select__link">
              Help to translate
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Пошук" placeholder="Пошук" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Шукати">
        
        <button type="reset" class="md-search__icon md-icon" title="Очистити" aria-label="Очистити" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Пошук розпочато
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Andygol/switch2osm-mkdocs" title="Перейти до вихідного коду" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
  </div>
  <div class="md-source__repository">
    Andygol/switch2osm-mkdocs
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Вкладки" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link">
        
  
    
  
  Switch2OSM

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../why-switch/" class="md-tabs__link">
        
  
    
  
  Навіщо?

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../case-studies/" class="md-tabs__link">
        
  
    
  
  Вже з OSM

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../the-basics/" class="md-tabs__link">
        
  
    
  
  Основи

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../using-tiles/" class="md-tabs__link">
        
  
    
  
  Мапа

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="../" class="md-tabs__link">
        
  
    
  
  Власний сервер

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../other-uses/" class="md-tabs__link">
        
  
    
  
  Інше

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../providers/" class="md-tabs__link">
        
  
    
  
  Постачальники

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../find-out-more/" class="md-tabs__link">
        
  
    
  
  Отримання допомоги

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Навігація" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="Switch2OSM" class="md-nav__button md-logo" aria-label="Switch2OSM" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.672 23.969c-.352-.089-.534-.234-1.471-1.168C.085 21.688.014 21.579.018 20.999c0-.645-.196-.414 3.368-3.986 3.6-3.608 3.415-3.451 4.064-3.449.302 0 .378.016.62.14l.277.14 1.744-1.744-.218-.343c-.425-.662-.825-1.629-1.006-2.429a7.66 7.66 0 0 1 1.479-6.44c2.49-3.12 6.959-3.812 10.26-1.588 1.812 1.218 2.99 3.099 3.328 5.314.07.467.07 1.579 0 2.074a7.55 7.55 0 0 1-2.205 4.402 6.7 6.7 0 0 1-1.943 1.401c-.959.483-1.775.71-2.881.803-1.573.131-3.32-.305-4.656-1.163l-.343-.218-1.744 1.744.14.28c.125.241.14.316.14.617.003.651.156.467-3.426 4.049-2.761 2.756-3.186 3.164-3.398 3.261-.271.125-.69.171-.945.106zM17.485 13.95a6.43 6.43 0 0 0 4.603-3.51c1.391-2.899.455-6.306-2.227-8.108-.638-.43-1.529-.794-2.367-.962-.581-.117-1.809-.104-2.414.025a6.6 6.6 0 0 0-2.452 1.064c-.444.315-1.177 1.048-1.487 1.487a6.384 6.384 0 0 0 .38 7.907 6.4 6.4 0 0 0 3.901 2.136c.509.078 1.542.058 2.065-.037zm-3.738 7.376a81 81 0 0 1-2.196-.651c-.025-.028 1.207-4.396 1.257-4.449.023-.026 4.242 1.152 4.414 1.236.062.026-.003.288-.525 2.102a399 399 0 0 0-.635 2.236c-.025.087-.069.156-.097.156-.028-.003-1.028-.287-2.219-.631zm2.912.524c0-.053 1.227-4.333 1.246-4.347.047-.034 4.324-1.23 4.341-1.211.019.019-1.199 4.337-1.23 4.36-.02.019-4.126 1.191-4.259 1.218-.054.011-.098 0-.098-.019zm-7.105-1.911c.846-.852 1.599-1.627 1.674-1.728.171-.218.405-.732.472-1.015.026-.118.053-.352.058-.522l.011-.307.182-.051c.103-.028.193-.044.202-.034.023.025-1.207 4.321-1.246 4.36-.02.016-.677.213-1.464.436l-1.425.405 1.537-1.542zm8.289-3.06a1.4 1.4 0 0 1-.059-.187l-.044-.156.156-.028c1.339-.227 2.776-.856 3.908-1.713.16-.125.252-.171.265-.134.054.165.272.95.265.959-.034.034-4.48 1.282-4.492 1.261zm-15.083-1.3c-.05-.039-1.179-3.866-1.264-4.29-.016-.084.146-.044 2.174.536 2.121.604 2.192.629 2.222.74.028.098.011.129-.125.223-.084.059-.769.724-1.523 1.479a64 64 0 0 1-1.39 1.367c-.016 0-.056-.025-.093-.054zm.821-4.378c-1.188-.343-2.164-.623-2.167-.626-.016-.012 1.261-4.433 1.285-4.46.022-.022 4.422 1.211 4.469 1.252.009.009-.269 1.017-.618 2.239-.576 2.02-.643 2.224-.723 2.22-.05-.003-1.059-.285-2.247-.626zm2.959.538c.012-.031.212-.723.444-1.534l.42-1.476.056.321c.093.556.265 1.188.464 1.741.106.296.187.539.181.545-.008.006-.332.101-.719.212-.389.109-.741.21-.786.224q-.085.025-.059-.034zM4.905 6.112c-1.187-.339-2.167-.635-2.18-.654-.04-.062-1.246-4.321-1.23-4.338.026-.025 4.31 1.204 4.351 1.246.047.051 1.28 4.379 1.246 4.376L4.91 6.113zm2.148-1.713-.519-1.806-.078-.28 1.693-.483c.934-.265 1.724-.495 1.76-.508.034-.016-.083.14-.26.336A8.7 8.7 0 0 0 7.69 5.23a4 4 0 0 0-.132.561c0 .293-.115-.025-.505-1.39z"></path></svg>

    </a>
    Switch2OSM
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Andygol/switch2osm-mkdocs" title="Перейти до вихідного коду" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
  </div>
  <div class="md-source__repository">
    Andygol/switch2osm-mkdocs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Switch2OSM
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../why-switch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Навіщо?
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../case-studies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Вже з OSM
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../the-basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Основи
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5">
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../using-tiles/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Мапа
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Мапа
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using-tiles/getting-started-with-leaflet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    За допомогою Leaflet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using-tiles/getting-started-with-openlayers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    За допомогою OpenLayers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using-tiles/getting-started-with-maplibre/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Початок роботи з MapLibre GL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using-tiles/vector-map-tiles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Переваги векторних тайлів
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Власний сервер
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Власний сервер
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" checked>
        
          
          <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Розгортаємо сервер вручну
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            Розгортаємо сервер вручну
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manually-building-a-tile-server-debian-13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debian 13
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manually-building-a-tile-server-debian-12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debian 12
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manually-building-a-tile-server-debian-11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debian 11
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manually-building-a-tile-server-ubuntu-24-04-lts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ubuntu 24.04
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manually-building-a-tile-server-ubuntu-22-04-lts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ubuntu 22.04
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manually-building-a-tile-server-ubuntu-20-04-lts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ubuntu 20.04
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Ubuntu 18.04
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Ubuntu 18.04
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Зміст">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Зміст
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#Встановлення-програмного-забезпечення" class="md-nav__link">
    <span class="md-ellipsis">
      Встановлення програмного забезпечення
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Встановлення-postgresql--postgis" class="md-nav__link">
    <span class="md-ellipsis">
      Встановлення postgresql / postgis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Встановлення postgresql / postgis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Встановлення-osm2pgsql" class="md-nav__link">
    <span class="md-ellipsis">
      Встановлення osm2pgsql
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Mapnik" class="md-nav__link">
    <span class="md-ellipsis">
      Mapnik
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Встановлення-mod_tile-та-renderd" class="md-nav__link">
    <span class="md-ellipsis">
      Встановлення mod_tile та renderd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Встановлення mod_tile та renderd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Компіляція-mod_tile-з-сирців" class="md-nav__link">
    <span class="md-ellipsis">
      Компіляція mod_tile з сирців
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Налаштування-стилів" class="md-nav__link">
    <span class="md-ellipsis">
      Налаштування стилів
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Завантаження-даних" class="md-nav__link">
    <span class="md-ellipsis">
      Завантаження даних
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Завантаження даних">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Завантаження-Shapefile" class="md-nav__link">
    <span class="md-ellipsis">
      Завантаження Shapefile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Шрифти" class="md-nav__link">
    <span class="md-ellipsis">
      Шрифти
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Налаштування-веб-сервера" class="md-nav__link">
    <span class="md-ellipsis">
      Налаштування веб-сервера
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Налаштування веб-сервера">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Конфігурація-renderd" class="md-nav__link">
    <span class="md-ellipsis">
      Конфігурація renderd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Конфігурація-Apache" class="md-nav__link">
    <span class="md-ellipsis">
      Конфігурація Apache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Перший-запуск-renderd" class="md-nav__link">
    <span class="md-ellipsis">
      Перший запуск renderd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Запуск-renderd-в-фоновому-режимі" class="md-nav__link">
    <span class="md-ellipsis">
      Запуск renderd в фоновому режимі
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Перегляд-тайлів" class="md-nav__link">
    <span class="md-ellipsis">
      Перегляд тайлів
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using-a-docker-container/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Використання контейнера Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../monitoring-using-munin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Моніторинг за допомогою Munin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4">
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Оновлення бази даних правками з OpenStreetMap
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            Оновлення бази даних правками з OpenStreetMap
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../updating-as-people-edit-osm2pgsql-replication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    osm2pgsql
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../updating-as-people-edit-pyosmium/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pyosmium
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../updating-as-people-edit-osmosis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    osmosis
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_5">
        
          
          <label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Векторні тайли
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_5">
            <span class="md-nav__icon md-icon"></span>
            Векторні тайли
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../serving-vector-tiles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Загальні кроки
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../serving-vector-tiles-with-tileserver-gl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Розгортання TileServer GL
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../other-uses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Інше
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Постачальники
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../find-out-more/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Отримання допомоги
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Зміст">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Зміст
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#Встановлення-програмного-забезпечення" class="md-nav__link">
    <span class="md-ellipsis">
      Встановлення програмного забезпечення
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Встановлення-postgresql--postgis" class="md-nav__link">
    <span class="md-ellipsis">
      Встановлення postgresql / postgis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Встановлення postgresql / postgis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Встановлення-osm2pgsql" class="md-nav__link">
    <span class="md-ellipsis">
      Встановлення osm2pgsql
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Mapnik" class="md-nav__link">
    <span class="md-ellipsis">
      Mapnik
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Встановлення-mod_tile-та-renderd" class="md-nav__link">
    <span class="md-ellipsis">
      Встановлення mod_tile та renderd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Встановлення mod_tile та renderd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Компіляція-mod_tile-з-сирців" class="md-nav__link">
    <span class="md-ellipsis">
      Компіляція mod_tile з сирців
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Налаштування-стилів" class="md-nav__link">
    <span class="md-ellipsis">
      Налаштування стилів
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Завантаження-даних" class="md-nav__link">
    <span class="md-ellipsis">
      Завантаження даних
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Завантаження даних">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Завантаження-Shapefile" class="md-nav__link">
    <span class="md-ellipsis">
      Завантаження Shapefile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Шрифти" class="md-nav__link">
    <span class="md-ellipsis">
      Шрифти
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Налаштування-веб-сервера" class="md-nav__link">
    <span class="md-ellipsis">
      Налаштування веб-сервера
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Налаштування веб-сервера">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Конфігурація-renderd" class="md-nav__link">
    <span class="md-ellipsis">
      Конфігурація renderd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Конфігурація-Apache" class="md-nav__link">
    <span class="md-ellipsis">
      Конфігурація Apache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Перший-запуск-renderd" class="md-nav__link">
    <span class="md-ellipsis">
      Перший запуск renderd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Запуск-renderd-в-фоновому-режимі" class="md-nav__link">
    <span class="md-ellipsis">
      Запуск renderd в фоновому режимі
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Перегляд-тайлів" class="md-nav__link">
    <span class="md-ellipsis">
      Перегляд тайлів
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/Andygol/switch2osm-mkdocs/edit/main/docs/uk/serving-tiles/manually-building-a-tile-server-ubuntu-18-04-lts.md" title="Редагувати сторінку" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/Andygol/switch2osm-mkdocs/raw/main/docs/uk/serving-tiles/manually-building-a-tile-server-ubuntu-18-04-lts.md" title="Переглянути вихідний код сторінки" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg>
    </a>
  


<h1 id="Створення-тайлового-сервера-вручну-Ubuntu-1804-LTS">Створення тайлового сервера вручну (Ubuntu 18.04 LTS)<a class="headerlink" href="#Створення-тайлового-сервера-вручну-Ubuntu-1804-LTS" title="Permanent link">⚓︎</a></h1>
<div class="admonition info">
<p>На цій сторінці міститься опис зі встановлення, розгортання та налаштування всього потрібного програмного забезпечення для роботи вашого тайлового сервера. Покрокові інструкції описують встановлення тайлового сервера на <a href="https://ubuntu.com/" target="_blank">Ubuntu Linux</a> 18.04 LTS (Bionic Beaver), вони були перевірені у травні 2020.</p>
</div>
<h2 id="Встановлення-програмного-забезпечення">Встановлення програмного забезпечення<a class="headerlink" href="#Встановлення-програмного-забезпечення" title="Permanent link">⚓︎</a></h2>
<p>Тайловий сервер OpenStreetMap&nbsp;– це набір програмного забезпечення та бібліотек, які працюють разом генеруючи тайли. Як це трапляється доволі часто в OpenStreetMap, існує кілька різних шляхів для досягнення мети і майже кожен компонент має альтернативу, з власними недоліками та перевагами. Цей посібник описує найбільш стандартну версію, що схожа на те, що використовується головним тайловим сервером OpenStreetMap.</p>
<p>Тайловий сервер складається з пʼяти головних частин: <code>mod_tile</code>, <code>renderd</code>, <code>mapnik</code>, <code>osm2pgsql</code> та база даних <code>postgresql/postgis</code>. Mod_tile&nbsp;– модуль сервера Apache, який обслуговує тайловий кеш та визначає які тайли потрібно перегенерувати, через їх відсутність у кеші або тому, що вони застаріли. Renderd визначає пріоритети в чергах різного штибу запитів для згладжування навантаження. Mapnik&nbsp;– бібліотека, яка відповідає безпосередньо за створення тайлів з черги, якою керує renderd.</p>
<p>Зауважте, що це керівництво було написане та протестоване з використанням нововстановленого сервера з операційною системою Ubuntu 18.04. Якщо у вас встановлені інші версії програмного забезпечення (можливо ви оновились з попередньої версії Ubuntu, або у вас підʼєднані інші репозиторії PPA), можливо вам доведеться внести певні зміни.</p>
<p>Керівництво передбачає, що ви виконуєте всі команди в оточені звичайного користувача за допомогою команди <code>sudo</code>. Нижче ви побачите нікнейм такого користувача <code>renderaccount</code>&nbsp;– ви можете створити його так само, або змінити наведені скрипти, щоб вони працювали від імені вашого користувача. Якщо ви створите у себе користувача <code>renderaccount</code>, вам буде потрібно додати його в групу, яка має дозвіл на використання команди <code>sudo</code>, для цього з оточення звичайного користувача виконайте наступні команди:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>sudo<span class="w"> </span>-i
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>usermod<span class="w"> </span>-aG<span class="w"> </span>sudo<span class="w"> </span>renderaccount
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="nb">exit</span>
</span></code></pre></div>
<p>Для того, щоб створити всі ці компоненти, вам спочатку треба встановити наступні залежності:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>sudo<span class="w"> </span>add-apt-repository<span class="w"> </span>multiverse
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>sudo<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span>libboost-all-dev<span class="w"> </span>git-core<span class="w"> </span>tar<span class="w"> </span>unzip<span class="w"> </span>wget<span class="w"> </span>bzip2<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span>build-essential<span class="w"> </span>autoconf<span class="w"> </span>libtool<span class="w"> </span>libxml2-dev<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span>libgeos-dev<span class="w"> </span>libgeos++-dev<span class="w"> </span>libpq-dev<span class="w"> </span>libbz2-dev<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span>libproj-dev<span class="w"> </span>munin-node<span class="w"> </span>munin<span class="w"> </span>libprotobuf-c0-dev<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span>protobuf-c-compiler<span class="w"> </span>libfreetype6-dev<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span>libtiff5-dev<span class="w"> </span>libicu-dev<span class="w"> </span>libgdal-dev<span class="w"> </span>libcairo-dev<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">    </span>libcairomm-1.0-dev<span class="w"> </span>apache2<span class="w"> </span>apache2-dev<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span>libagg-dev<span class="w"> </span>liblua5.2-dev<span class="w"> </span>ttf-unifont<span class="w"> </span>lua5.1<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span>liblua5.1-dev<span class="w"> </span>libgeotiff-epsg
</span></code></pre></div>
<p>Скажіть Так на запит системи про початок встановлення. Це триватиме доволі довго, тож у вас є час на філіжанку кави. Цей перелік містить різноманітні утиліти, наприклад, вебсервер Apache, компілятор "carto", що використовується для конвертації стилів Carto-CSS в зрозумілий для "mapnik" вигляд. Коли закінчиться встановлення цієї частини, встановіть наступний набір потрібних компонентів:</p>
<h2 id="Встановлення-postgresql--postgis">Встановлення postgresql / postgis<a class="headerlink" href="#Встановлення-postgresql--postgis" title="Permanent link">⚓︎</a></h2>
<p>Ubuntu має спаковані версії <code>postgis</code> і <code>postgresql</code>, тож вони можуть бути легко встановлені з допомогою менеджера пакунків Ubuntu.</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span>postgresql<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span>postgresql-contrib<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span>postgis<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span>postgresql-10-postgis-2.4<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span>postgresql-10-postgis-scripts
</span></code></pre></div>
<p>Тут <code>postgresql</code> це сервер баз даних, який ми збираємось встановити для зберігання наших даних, а <code>postgis</code> додає йому підтримку роботи з геопросторовими даними. То ж знов, скажіть Так для встановлення.</p>
<p>Тепер вам треба створити базу даних з підтримкою postgis. Типові налаштування різноманітних програм очікують що база даних називатиметься <code>gis</code>, тож ми будемо дотримуватись цієї угоди в цім керівництві, хоча це й не обовʼязково. Замініть тут, і далі нижче, <code>renderaccount</code> на імʼя користувача під яким буде відбуватись генерування тайлів за допомогою Mapnik.</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>sudo<span class="w"> </span>-u<span class="w"> </span>postgres<span class="w"> </span>-i
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>createuser<span class="w"> </span>renderaccount
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>createdb<span class="w"> </span>-E<span class="w"> </span>UTF8<span class="w"> </span>-O<span class="w"> </span>renderaccount<span class="w"> </span>gis
</span></code></pre></div>
<p>Поки ви працюєте як користувач <code>postgres</code>, встановіть PostGIS в базу даних PostgreSQL (знову, замініть <code>renderaccount</code> на вашого користувача нижче):</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>psql
</span></code></pre></div>
<p>(це призведе до появи <code>postgres=#</code> на початку рядка консолі)</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="se">\c</span><span class="w"> </span>gis
</span></code></pre></div>
<p>(у відповідь ви побачите: "You are now connected to database 'gis' as user 'postgres'" <br>["Тепер ви підʼєднані до бази даних 'gis' як користувач 'postgres'"])</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">CREATE</span><span class="w"> </span><span class="n">EXTENSION</span><span class="w"> </span><span class="n">postgis</span><span class="p">;</span>
</span></code></pre></div>
<p>(у відповідь ви побачите: CREATE EXTENSION)</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">CREATE</span><span class="w"> </span><span class="n">EXTENSION</span><span class="w"> </span><span class="n">hstore</span><span class="p">;</span>
</span></code></pre></div>
<p>(у відповідь ви побачите: CREATE EXTENSION)</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">geometry_columns</span><span class="w"> </span><span class="k">OWNER</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">renderaccount</span><span class="p">;</span>
</span></code></pre></div>
<p>(у відповідь ви побачите: ALTER TABLE)</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">spatial_ref_sys</span><span class="w"> </span><span class="k">OWNER</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">renderaccount</span><span class="p">;</span>
</span></code></pre></div>
<p>(у відповідь ви побачите: ALTER TABLE)</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="se">\q</span>
</span></code></pre></div>
<p>(це призведе до виходу з сесії psql та повернення назад у консоль Linux)</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nb">exit</span>
</span></code></pre></div>
<p>(повернення назад до сесії користувача, в якій ми знаходились до виконання команди <code>sudo -u postgres -i</code> вище)</p>
<p>Якщо ви ще цього не зробили, створіть обліковий запис для вашого користувача, введіть пароль коли це буде запропоновано:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>sudo<span class="w"> </span>useradd<span class="w"> </span>-m<span class="w"> </span>renderaccount
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>sudo<span class="w"> </span>passwd<span class="w"> </span>renderaccount
</span></code></pre></div>
<p>Знов, замініть <code>renderaccount</code> імʼям користувача без адміністративних повноважень на ваш смак.</p>
<h3 id="Встановлення-osm2pgsql">Встановлення osm2pgsql<a class="headerlink" href="#Встановлення-osm2pgsql" title="Permanent link">⚓︎</a></h3>
<p>Тепер нам треба встановити деяке програмне забезпечення з сирців. Перше, це <code>osm2pgsql</code>. Для імпорту та керування даними OpenStreetMap в базі даних існують різні інструменти. Ми будемо використовувати <code>osm2pgsql</code>, це найпопулярніший інструмент серед інших.</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>mkdir<span class="w"> </span>~/src
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="nb">cd</span><span class="w"> </span>~/src
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/openstreetmap/osm2pgsql
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="nb">cd</span><span class="w"> </span>osm2pgsql
</span></code></pre></div>
<p>Механізм збирання, що використовується для osm2pgsql, трохи змінився з часом і нам доведеться встановити кілька залежностей:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span><span class="se">\</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">    </span>make<span class="w"> </span>cmake<span class="w"> </span>g++<span class="w"> </span>libboost-dev<span class="w"> </span>libboost-system-dev<span class="w"> </span><span class="se">\</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">    </span>libboost-filesystem-dev<span class="w"> </span>libexpat1-dev<span class="w"> </span>zlib1g-dev<span class="w"> </span><span class="se">\</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">    </span>libbz2-dev<span class="w"> </span>libpq-dev<span class="w"> </span>libgeos-dev<span class="w"> </span>libgeos++-dev<span class="w"> </span><span class="se">\</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">    </span>libproj-dev<span class="w"> </span>lua5.2<span class="w"> </span>liblua5.2-dev
</span></code></pre></div>
<p>Знов, скажіть Так для встановлення.</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>mkdir<span class="w"> </span>build<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>cmake<span class="w"> </span>..
</span></code></pre></div>
<p>(в результаті ви маєте отримати повідомлення "build files have been written to"/"створені файли були записані в")</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>make
</span></code></pre></div>
<p>(вивід має закінчуватись рядком "[100%] Built target osm2pgsql"/"[100%] Створення osm2pgsql")</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>sudo<span class="w"> </span>make<span class="w"> </span>install
</span></code></pre></div>
<h2 id="Mapnik">Mapnik<a class="headerlink" href="#Mapnik" title="Permanent link">⚓︎</a></h2>
<p>Далі, ми встановимо Mapnik. Ми будем використовувати типову версію з Ubuntu 18.04:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span><span class="se">\</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="w">    </span>autoconf<span class="w"> </span>apache2-dev<span class="w"> </span>libtool<span class="w"> </span>libxml2-dev<span class="w"> </span><span class="se">\</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">    </span>libbz2-dev<span class="w"> </span>libgeos-dev<span class="w"> </span>libgeos++-dev<span class="w"> </span>libproj-dev<span class="w"> </span><span class="se">\</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">    </span>gdal-bin<span class="w"> </span>libmapnik-dev<span class="w"> </span>mapnik-utils<span class="w"> </span><span class="se">\</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">    </span>python-mapnik<span class="w"> </span>python3-psycopg2
</span></code></pre></div>
<p>Перевіримо чи Mapnik встановлено правильно:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="n">python</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">mapnik</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="o">&gt;&gt;&gt;</span>
</span></code></pre></div>
<p>Якщо python у відповідь видає тільки <code>&gt;&gt;&gt;</code> без повідомлення про помилки, значить бібліотека Mapnik є доступною в Python. Вітаємо! Для виходу із сесії Python скористайтесь наступною командою:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">quit</span><span class="p">()</span>
</span></code></pre></div>
<h2 id="Встановлення-mod_tile-та-renderd">Встановлення mod_tile та renderd<a class="headerlink" href="#Встановлення-mod_tile-та-renderd" title="Permanent link">⚓︎</a></h2>
<p>Далі, ми встановимо mod_tile та renderd. <code>mod_tile</code>&nbsp;– модуль Apache, який обробляє запити на показ тайлів; <code>renderd</code>&nbsp;– фонова служба, яка відповідає за генерацію тайлів на запит <code>mod_tile</code>. Ми будемо використовувати гілку <code>switch2osm</code> з <a href="https://github.com/SomeoneElseOSM/mod_tile" target="_blank">https://github.com/SomeoneElseOSM/mod_tile</a>, яка своєю чергою базується на коді <a href="https://github.com/openstreetmap/mod_tile" target="_blank">https://github.com/openstreetmap/mod_tile</a>, але змінена таким чином, щоб працювати на Ubuntu 18.04, також вона містить пару інших змін потрібних для роботи зі стандартним сервером на Ubuntu на відміну від того, що використовується на тайлових серверах OpenStreetMap.</p>
<h3 id="Компіляція-mod_tile-з-сирців">Компіляція mod_tile з сирців<a class="headerlink" href="#Компіляція-mod_tile-з-сирців" title="Permanent link">⚓︎</a></h3>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nb">cd</span><span class="w"> </span>~/src
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>switch2osm<span class="w"> </span>git://github.com/SomeoneElseOSM/mod_tile.git
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="nb">cd</span><span class="w"> </span>mod_tile
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>./autogen.sh
</span></code></pre></div>
<p>(виконання має закінчитись повідомленням <code>autoreconf: Leaving directory '.'</code>.)</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>./configure
</span></code></pre></div>
<p>(має закінчитись повідомленням <code>config.status: executing libtool commands</code>)</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>make
</span></code></pre></div>
<p>Зауважте, що деякі "попереджувальні" повідомлення будуть зʼявлятись на екрані. Проте все має закінчитись повідомленням "make[1]: Leaving directory '/home/renderaccount/src/mod_tile'".</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>sudo<span class="w"> </span>make<span class="w"> </span>install
</span></code></pre></div>
<p>(має закінчитись повідомленням "make[1]: Leaving directory '/home/renderaccount/src/mod_tile'")</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>sudo<span class="w"> </span>make<span class="w"> </span>install-mod_tile
</span></code></pre></div>
<p>(має закінчитись повідомленням "chmod 644 /usr/lib/apache2/modules/mod_tile.so")</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>sudo<span class="w"> </span>ldconfig
</span></code></pre></div>
<p>(тут немає бути жодного повідомлення)</p>
<h2 id="Налаштування-стилів">Налаштування стилів<a class="headerlink" href="#Налаштування-стилів" title="Permanent link">⚓︎</a></h2>
<p>Тепер, після того, як все потрібне програмне забезпечення встановлене, вам треба завантажити та налаштувати стилі.</p>
<p>Стиль, який ми будемо використовувати,&nbsp;– це стиль який застосовується для створення "Стандартного" шару на сайті openstreetmap.org. Ми обрали його через гарну документацію і те, що він здатен працювати для будь-якої частини світу, навіть там де не використовується латинка. Але у нього є й певні недоліки&nbsp;– це компромісні рішення для того, щоб працювати в глобальних масштабах, він дуже складний для розуміння та внесення змін, якщо вам доведеться їх вносити.</p>
<p>Код стилю "OpenStreetMap Carto" з веб-сайту openstreetmap.org знаходиться на GitHub&nbsp;– <a href="https://github.com/gravitystorm/openstreetmap-carto/" target="_blank">https://github.com/gravitystorm/openstreetmap-carto/</a> та також має власні інструкції зі встановлення&nbsp;– <a href="https://github.com/gravitystorm/openstreetmap-carto/blob/master/INSTALL.md" target="_blank">https://github.com/gravitystorm/openstreetmap-carto/blob/master/INSTALL.md</a>. Про те, що потрібно зробити, ми розповімо тут.</p>
<p>Передбачається що ми розміщуємо стиль в теці <code>~/src</code> домашньої директорії користувача <code>renderaccount</code> (або будь-якого іншого, якого ви створили до цього)</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="nb">cd</span><span class="w"> </span>~/src
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/gravitystorm/openstreetmap-carto
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="nb">cd</span><span class="w"> </span>openstreetmap-carto
</span></code></pre></div>
<p>Далі, встановимо потрібну версію компілятора <code>carto</code>. Це більш свіжа версія, ніж та що є в Ubuntu, тож нам потрібно зробити наступне:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>nodejs-dev<span class="w"> </span>node-gyp<span class="w"> </span>libssl1.0-dev
</span></code></pre></div>
<p>Як це не дивно, це призведе до видалення деяких раніше встановлених речей. Потім зробіть:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>npm<span class="w"> </span>nodejs
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>sudo<span class="w"> </span>npm<span class="w"> </span>install<span class="w"> </span>-g<span class="w"> </span>carto
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>carto<span class="w"> </span>-v
</span></code></pre></div>
<p>У відповідь ми маємо отримати інформацію про номер версії, яка має бути не менше ніж:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>carto<span class="w"> </span><span class="m">1</span>.2.0<span class="w"> </span><span class="o">(</span>Carto<span class="w"> </span>map<span class="w"> </span>stylesheet<span class="w"> </span>compiler<span class="o">)</span>
</span></code></pre></div>
<p>Після цього ми перетворимо проєкт carto у зрозумілий для Mapnik вигляд:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>carto<span class="w"> </span>project.mml<span class="w"> </span>&gt;<span class="w"> </span>mapnik.xml
</span></code></pre></div>
<p>Тепер у нас є стиль Mapnik XML&nbsp;– <code>/home/renderaccount/src/openstreetmap-carto/mapnik.xml</code>.</p>
<h2 id="Завантаження-даних">Завантаження даних<a class="headerlink" href="#Завантаження-даних" title="Permanent link">⚓︎</a></h2>
<p>Для початку, завантажимо невеличку частину тестових даних. Серед різномаїття місць для отримання даних, оберемо <code>download.geofabrik.de</code>, що містить великий перелік різних варіантів для завантаження. Візьмімо для прикладу Азербайджан (~32.4 Мб).</p>
<p>Перейдіть за посиланням <a href="https://download.geofabrik.de/asia/azerbaijan.html" target="_blank">https://download.geofabrik.de/asia/azerbaijan.html</a> та зверніть увагу на дату "This file was last modified" (щось схоже на "2017-02-26T21:43:02Z"). Вона нам знадобиться потім, коли у нас виникне потреба оновити наші дані даними, які учасники OpenStreetMap додали з моменту нашого імпорту. Завантажимо дані:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>mkdir<span class="w"> </span>~/data
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="nb">cd</span><span class="w"> </span>~/data
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>wget<span class="w"> </span>https://download.geofabrik.de/asia/azerbaijan-latest.osm.pbf
</span></code></pre></div>
<p>Наступна команда допоможе вам перенести завантажені дані до вашої бази даних. На цьому етапі зросте навантаження на дискові операції через потребу перенесення значного обсягу інформації; імпорт всієї планети може тривати кілька годин, днів та навіть тижнів, в залежності від потужностей вашого серверного обладнання. Зрозуміло, що для невеликих частин даних імпорт відбувається значно швидше, можливо вам доведеться поекспериментувати зі значенням параметра <code>-C</code>, щоб вкластись у наявну оперативну памʼять вашого сервера.</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>osm2pgsql<span class="w"> </span>-d<span class="w"> </span>gis<span class="w"> </span>--create<span class="w"> </span>--slim<span class="w">  </span>-G<span class="w"> </span>--hstore<span class="w"> </span><span class="se">\</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="w">    </span>--tag-transform-script<span class="w"> </span><span class="se">\</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="w">        </span>~/src/openstreetmap-carto/openstreetmap-carto.lua<span class="w"> </span><span class="se">\</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="w">    </span>-C<span class="w"> </span><span class="m">2500</span><span class="w"> </span>--number-processes<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="w">    </span>-S<span class="w"> </span>~/src/openstreetmap-carto/openstreetmap-carto.style<span class="w"> </span><span class="se">\</span>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="w">    </span>~/data/azerbaijan-latest.osm.pbf
</span></code></pre></div>
<p>Розберімося що означають всі ці параметри:</p>
<dl>
<dt><code>-d gis</code></dt>
<dd>База даних, з якою ми працюємо (типово використовується <code>gis</code>; тут треба вказати її явно).</dd>
<dt><code>--create</code></dt>
<dd>Завантажити дані в пусту базу даних, замість спроб додати їх до наявних.</dd>
<dt><code>--slim</code></dt>
<dd>osm2pgsql може використовувати різноманітні схеми таблиць; "slim" годиться для генерації тайлів.</dd>
<dt><code>-G</code></dt>
<dd>Визначає, яким чином будуть оброблятись мультиполігони.</dd>
<dt><code>--hstore</code></dt>
<dd>Дозволяє використовувати для генерації тайлів теґи, для яких немає окремих стовпців в базі даних.</dd>
<dt><code>--tag-transform-script ~/src/openstreetmap-carto/openstreetmap-carto.lua</code></dt>
<dd>Визначає скрипт lua, який використовується для обробки теґів. Це простий спосіб обробки теґів OSM до того, як вони будуть використані в стилі, що спрощує логіку самого стилю.</dd>
<dt><code>-C 2500</code></dt>
<dd>Виділяє 2.5 Гб оперативної памʼяті для osm2pgsql на виконання імпорту. Якщо у вас менше оперативної памʼяті, спробуйте менше значення. Якщо процес імпорту буде знищений через нестачу оперативної памʼяті, спробуйте зменшити це число або використовуйте менший обсяг даних.</dd>
<dt><code>--number-processes 1</code></dt>
<dd>Використовувати одне ядро процесора. Якщо у вас багатоядерний процесор можете використовувати більшу кількість ядер.</dd>
<dt><code>-S ~/src/openstreetmap-carto/openstreetmap-carto.style</code></dt>
<dd>Створювати стовпці в базі даних використовуючи вказаний файл (в нашому випадку він нічим не відрізняється від стандартного "openstreetmap-carto")</dd>
<dt><code>~/data/azerbaijan-latest.osm.pbf</code></dt>
<dd>Останній аргумент&nbsp;– це файл з даними для завантаження в базу.</dd>
</dl>
<p>Результатом роботи цієї команди має бути щось схоже на "Osm2pgsql took 238s overall".</p>
<h3 id="Завантаження-Shapefile">Завантаження Shapefile<a class="headerlink" href="#Завантаження-Shapefile" title="Permanent link">⚓︎</a></h3>
<p>Незважаючи на те, що більшість даних для створення мапи береться з файлу з даними OpenStreetMap, який ви завантажили раніше, деякі файли в форматі shapefile все ж такі потрібні для таких речей, наприклад, як кордони країн на великих масштабах. Для їх отримання та індексації зробіть:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="nb">cd</span><span class="w"> </span>~/src/openstreetmap-carto/
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>scripts/get-external-data.py
</span></code></pre></div>
<p>Цей процес вимагає завантаження великої порції даних та триватиме деякий час без будь-яких помітних змін на екрані. Він фактично робить запис у підтеку "data" в "openstreetmap-carto".</p>
<h3 id="Шрифти">Шрифти<a class="headerlink" href="#Шрифти" title="Permanent link">⚓︎</a></h3>
<p>Починаючи з версії v5.6.0 шрифти для Carto потрібно встановити вручну:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="nb">cd</span><span class="w"> </span>~/src/openstreetmap-carto/
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>scripts/get-fonts.sh
</span></code></pre></div>
<p>Наші тестові дані (Азербайджан) були обрані через їх невеликий обсяг, а також через те, що армянська писемність використовує власну абетку.</p>
<h2 id="Налаштування-веб-сервера">Налаштування веб-сервера<a class="headerlink" href="#Налаштування-веб-сервера" title="Permanent link">⚓︎</a></h2>
<h3 id="Конфігурація-renderd">Конфігурація renderd<a class="headerlink" href="#Конфігурація-renderd" title="Permanent link">⚓︎</a></h3>
<p>Налаштування <code>renderd</code> знаходяться у файлі <code>/usr/local/etc/renderd.conf</code>. Відредагуємо його за допомогою текстового редактора, такого як nano:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>sudo<span class="w"> </span>nano<span class="w"> </span>/usr/local/etc/renderd.conf
</span></code></pre></div>
<p>Нам потрібно змінити пару рядків. В розділі <code>renderd</code>:</p>
<div class="language-ini highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="na">num_threads</span><span class="o">=</span><span class="s">4</span>
</span></code></pre></div>
<p>Якщо у вас десь 2 Гб оперативної памʼяті, можливо вам доведеться зменшити цей параметр до 2. Розділ <code>ajt</code> відповідає за "іменований стиль мапи" з назвою <code>ajt</code>. Ви можете мати більше ніж один такий розділ, якщо треба, за умови, що у них будуть різні URI. Рядок <code>XML</code> треба буде змінити на кшталт:</p>
<div class="language-ini highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="na">XML</span><span class="o">=</span><span class="s">/home/renderaccount/src/openstreetmap-carto/mapnik.xml</span>
</span></code></pre></div>
<p>Звісно, потрібно буде замінити <code>renderaccount</code> на користувача, якого ви створили в системі до цього.</p>
<div class="language-ini highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="na">URI</span><span class="o">=</span><span class="s">/hot/</span>
</span></code></pre></div>
<p>Цей параметр було обрано для того щоби було простіше використовувати ваші тайли замість шару Humanitarian з сайту OpenStreetMap.org. Ви можете вказати щось інше, але <code>/hot/</code> також годиться.</p>
<h3 id="Конфігурація-Apache">Конфігурація Apache<a class="headerlink" href="#Конфігурація-Apache" title="Permanent link">⚓︎</a></h3>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>sudo<span class="w"> </span>mkdir<span class="w"> </span>/var/lib/mod_tile
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>sudo<span class="w"> </span>chown<span class="w"> </span>renderaccount<span class="w"> </span>/var/lib/mod_tile
</span></code></pre></div>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>sudo<span class="w"> </span>mkdir<span class="w"> </span>/var/run/renderd
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>sudo<span class="w"> </span>chown<span class="w"> </span>renderaccount<span class="w"> </span>/var/run/renderd
</span></code></pre></div>
<p>Тепер нам треба вказати Apache, що нам треба використовувати <code>mod_tile</code>, відкриємо nano (або інший редактор):</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/apache2/conf-available/mod_tile.conf
</span></code></pre></div>
<p>Додайте наступний рядок у файл:</p>
<div class="language-ini highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="na">LoadModule tile_module /usr/lib/apache2/modules/mod_tile.so</span>
</span></code></pre></div>
<p>збережіть його та виконайте команду:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>sudo<span class="w"> </span>a2enconf<span class="w"> </span>mod_tile
</span></code></pre></div>
<p>У відповідь ви побачите, що вам треба перезапустити сервіс apache командою <code>service apache2 reload</code> для активації нових налаштувань; але ми не будемо робити цього зараз.</p>
<p>Зараз нам треба підʼєднати <code>renderd</code> до Apache. За допомогою nano (або іншого редактора):</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/apache2/sites-available/000-default.conf
</span></code></pre></div>
<p>Додайте наступне між рядками <code>ServerAdmin</code> та <code>DocumentRoot</code>:</p>
<div class="language-ini highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="na">LoadTileConfigFile /usr/local/etc/renderd.conf</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="na">ModTileRenderdSocketName /var/run/renderd/renderd.sock</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="c1"># Час очікування, перш ніж відмовитись від генерації тайлу</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="na">ModTileRequestTimeout 0</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="c1"># Час очікування, перш ніж відмовитись від генерації відсутнього тайлу</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="na">ModTileMissingRequestTimeout 30</span>
</span></code></pre></div>
<p>І перезапустіть apache двічі:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>sudo<span class="w"> </span>service<span class="w"> </span>apache2<span class="w"> </span>reload
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>sudo<span class="w"> </span>service<span class="w"> </span>apache2<span class="w"> </span>reload
</span></code></pre></div>
<p>(Є підозри, що Apache трохи "підтуплює" під час зміни налаштувань на ходу, тож на всяк випадок це треба зробити двічі).</p>
<p>Якщо ви перейдете в оглядачі на: <code>http://ip.вашого.сервера/index.html</code>, ви маєте побачити стандартну сторінку apache в Ubuntu&nbsp;– "It works!".</p>
<div class="admonition tip">
<p class="admonition-title">Порада</p>
<p>якщо ви не знаєте IP адресу призначену серверу, її можна дізнатись за допомогою команди <code>ifconfig</code>&nbsp;– якщо мережеві налаштування не надто складні, то це має бути щось типу <code>inet addr</code> відмінне від <code>127.0.0.1</code>.</p>
</div>
<p>Якщо ви використовуєте сервер постачальника послуг хостингу, то, швидше за все, внутрішня адреса вашого сервера буде відрізнятися від зовнішньої адреси, яка була надана вам, але ця зовнішня IP-адреса вже буде надіслана вам, і, ймовірно, ви її використовуєте зараз для доступу до сервера.</p>
<p>Зауважте, що це лише сайт <code>http</code> (порт 80)&nbsp;– вам потрібно витратити трохи більше часу для налаштування Apache на використання <code>https</code>, але це виходить за межі цих інструкцій. Однак якщо ви використовуєте "Let's Encrypt" для отримання сертифікатів, інструкція зі встановлення може також містити поради щодо налаштування сайту Apache для використання https.</p>
<h3 id="Перший-запуск-renderd">Перший запуск renderd<a class="headerlink" href="#Перший-запуск-renderd" title="Permanent link">⚓︎</a></h3>
<p>Далі, нам треба запустити <code>renderd</code>, щоб спробувати згенерувати кілька тайлів. Спочатку ми запустимо його так, щоб ми мали змогу відстежити появу помилок:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>renderd<span class="w"> </span>-f<span class="w"> </span>-c<span class="w"> </span>/usr/local/etc/renderd.conf
</span></code></pre></div>
<p>Ви можете побачити кілька попереджень, але не турбуйтеся про це. Головне, щоб не було помилок. В разі появи помилок, збережіть повний вивід, наприклад на pastebin, та зверніться по допомогу, наприклад, на <a href="https://community.openstreetmap.org" target="_blank"><code>community.openstreetmap.org</code></a> (дайте посилання на pastebin&nbsp;– не включайте весь вивід до питання).</p>
<p>Відкрийте у себе в оглядачі посилання: <code>http://ip.вашого.сервера/hot/0/0/0.png</code></p>
<p>Ви маєте побачити мапу світу у вашому оглядачі та кілька повідомлень в терміналі, включаючи "DEBUG: START TILE" та "DEBUG: DONE TILE". Не звертайте уваги на повідомлення "DEBUG: Failed to read cmd on fd"&nbsp;– це не помилка. Якщо ви не побачили цього тайлу та отримали інші помилки, знов, збережіть вивід на pastebin та зверніться за допомогою, наприклад на <a href="https://community.openstreetmap.org" target="_blank"><code>community.openstreetmap.org</code></a>.</p>
<p>Якщо все працює, натисніть <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> для зупинки процесу генерації тайлів.</p>
<h3 id="Запуск-renderd-в-фоновому-режимі">Запуск renderd в фоновому режимі<a class="headerlink" href="#Запуск-renderd-в-фоновому-режимі" title="Permanent link">⚓︎</a></h3>
<p>Далі ми налаштуємо <code>renderd</code> для роботи в фоновому режимі. По-перше, змініть файл <code>~/src/mod_tile/debian/renderd.init</code> та вкажіть у "RUNASUSER" того користувача, якого ви створили до цього, замість <code>renderaccount</code>, потім скопіюйте його до теки system:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>nano<span class="w"> </span>~/src/mod_tile/debian/renderd.init
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>sudo<span class="w"> </span>cp<span class="w"> </span>~/src/mod_tile/debian/renderd.init<span class="w"> </span>/etc/init.d/renderd
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a>sudo<span class="w"> </span>chmod<span class="w"> </span>u+x<span class="w"> </span>/etc/init.d/renderd
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a>sudo<span class="w"> </span>cp<span class="w"> </span>~/src/mod_tile/debian/renderd.service<span class="w"> </span>/lib/systemd/system/
</span></code></pre></div>
<p>Файл <code>renderd.service</code>&nbsp;– це файл системної служби <code>systemd</code>. Версія зазначена тут використовує команди init. Щоб переконатись що команда запуску відпрацьовує, запустіть:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>sudo<span class="w"> </span>/etc/init.d/renderd<span class="w"> </span>start
</span></code></pre></div>
<p>(маєте отримати відповідь&nbsp;– "[ ok ] Starting renderd (via systemctl): renderd.service".)</p>
<p>Для автоматичного запуску кожного разу, ввімкніть renderd командою:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>renderd
</span></code></pre></div>
<h2 id="Перегляд-тайлів">Перегляд тайлів<a class="headerlink" href="#Перегляд-тайлів" title="Permanent link">⚓︎</a></h2>
<p>Для того, щоб побачити тайли, ми трохи змахлюємо користуючись файлом <code>sample_leaflet.html</code> з теки “extras” в mod_tile. Просто відкрийте цей файл у вебоглядачі на компʼютері де ви встановили тайловий сервер. Якщо це не можливо&nbsp;– ви встановили тайл-сервер на сервері де немає вебоглядача, ви можете замінити <code>127.0.0.1</code> на IP адресу сервера, після чого скопіюйте його в <code>/var/www/html</code>.</p>
<p>Через ssh-зʼєднання виконайте команду:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>tail<span class="w"> </span>-f<span class="w"> </span>/var/log/syslog<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">" TILE "</span>
</span></code></pre></div>
<p>(зверніть увагу на пробіли довкола <code>" TILE "</code>)</p>
<p>У відповідь ви отримуватимете по рядку кожного разу, коли буде приходити запит на показ тайлів, або буде закінчуватись їх створення.</p>
<p>Під час завантаження сторінки ви маєте побачити кілька запитів на показ тайлів. Віддаляйтесь поступово. Ви побачите, запити на нові тайли зʼявлятимуться у вашому ssh-зʼєднанні. Деякі тайли на крупних масштабах вимагають багато часу на створення (кілька хвилин) першого разу, але після того, як вони будуть створені, вони будуть доступні для показу миттєво.</p>
<p>Вітаємо! Тепер ви можете повернутись до розділу <a href="../../using-tiles/">Використання тайлів</a> для додавання мапи, що використовує ваш новий тайловий сервер.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Повернутись нагору
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Футер">
        
          
          <a href="../manually-building-a-tile-server-ubuntu-20-04-lts/" class="md-footer__link md-footer__link--prev" aria-label="Назад: Ubuntu 20.04">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Назад
              </span>
              <div class="md-ellipsis">
                Ubuntu 20.04
              </div>
            </div>
          </a>
        
        
          
          <a href="../using-a-docker-container/" class="md-footer__link md-footer__link--next" aria-label="Вперед: Використання контейнера Docker">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Вперед
              </span>
              <div class="md-ellipsis">
                Використання контейнера Docker
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      © 2013–2025 Учасники OpenStreetMap, <a rel="license" href="https://creativecommons.org/licenses/by-sa/2.0/deed.uk" target="_blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/2.0/80x15.png"></a><br>Матеріали цього сайту ліцензуються на умовах Ліцензії&nbsp;– <a rel="license" href="https://creativecommons.org/licenses/by-sa/2.0/deed.uk" target="_blank">Creative Commons Attribution-ShareAlike 2.0 Generic License</a>.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://app.transifex.com/osm-ua/switch2osm/dashboard/#/" target="_blank" rel="noopener" title="app.transifex.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"></path></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://openstreetmap.org/" target="_blank" rel="noopener" title="openstreetmap.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.4c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64h185.3c2.2 20.4 3.3 41.8 3.3 64m28.8-64h123.1c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64m112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6 78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7 10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5 11.6 26 20.9 58.2 27 94.7m-209 0H18.6c30-74.1 93.6-130.9 172-151.6-25.5 34.2-45.3 87.7-55.3 151.6M8.1 192h123.1c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64m186.6 254.6c-11.6-26-20.9-58.2-27-94.6h176.6c-6.1 36.4-15.5 68.6-27 94.6-10.5 23.6-22.2 40.7-33.5 51.5-11.2 10.7-20.5 13.9-27.8 13.9s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6-78.4-20.7-142-77.5-172-151.6zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6 25.5-34.2 45.2-87.7 55.3-151.6h116.7z"></path></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://community.openstreetmap.org/" target="_blank" rel="noopener" title="community.openstreetmap.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M225.9 32C103.3 32 0 130.5 0 252.1 0 256 .1 480 .1 480l225.8-.2c122.7 0 222.1-102.3 222.1-223.9S348.6 32 225.9 32M224 384c-19.4 0-37.9-4.3-54.4-12.1L88.5 392l22.9-75c-9.8-18.1-15.4-38.9-15.4-61 0-70.7 57.3-128 128-128s128 57.3 128 128-57.3 128-128 128"></path></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/openstreetmap" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"></path></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.facebook.com/OpenStreetMap/" target="_blank" rel="noopener" title="www.facebook.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256"></path></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.footer", "search.suggest", "toc.follow", "content.action.edit", "content.action.view", "content.code.copy", "announce.dismiss"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "\u0421\u043a\u043e\u043f\u0456\u0439\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440", "clipboard.copy": "\u0421\u043a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438 \u0432 \u0431\u0443\u0444\u0435\u0440", "search.result.more.one": "\u0429\u0435 1 \u0437\u0431\u0456\u0433 \u043d\u0430 \u0446\u0456\u0439 \u0441\u0442\u043e\u0440\u0456\u043d\u0446\u0456", "search.result.more.other": "\u0429\u0435 # \u0437\u0431\u0456\u0433\u0456\u0432 \u043d\u0430 \u0446\u0456\u0439 \u0441\u0442\u043e\u0440\u0456\u043d\u0446\u0456", "search.result.none": "\u0417\u0431\u0456\u0433\u0456\u0432 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e", "search.result.one": "\u0417\u043d\u0430\u0439\u0434\u0435\u043d\u043e 1 \u0437\u0431\u0456\u0433", "search.result.other": "\u0417\u043d\u0430\u0439\u0434\u0435\u043d\u043e # \u0437\u0431\u0456\u0433\u0456\u0432", "search.result.placeholder": "\u0420\u043e\u0437\u043f\u043e\u0447\u043d\u0456\u0442\u044c \u043f\u0438\u0441\u0430\u0442\u0438 \u0434\u043b\u044f \u043f\u043e\u0448\u0443\u043a\u0443", "search.result.term.missing": "\u041d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0437\u0430\u043f\u0438\u0442\u0443", "select.version": "\u041e\u0431\u0440\u0430\u0442\u0438 \u0432\u0435\u0440\u0441\u0456\u044e"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>